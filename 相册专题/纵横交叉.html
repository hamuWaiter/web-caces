<!DOCTYPE html>
<html lang="zh">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>相册</title>
	<link rel="stylesheet" type="text/css" href="css/reset.css"/>
	<link rel="stylesheet" type="text/css" href="css/case1.css"/>
</head>
<body>
	<div class="box">
		<div class="container">
			<ul class="pics">
				<li class="inner-item"><img src="img/case1/20.jpg" ></li>
				<li class="inner-item"><img src="img/case1/3.jpg" ></li>
				<li class="inner-item"><img src="img/case1/6.jpg" ></li>
				<li class="inner-item"><img src="img/case1/7.jpg" ></li>
				<li class="inner-item"><img src="img/case1/8.jpg" ></li>
				
				<li class="outer-item"><img src="img/case1/21.jpg" ></li>
				<li class="outer-item"><img src="img/case1/22.jpg" ></li>
				<li class="outer-item"><img src="img/case1/23.jpg" ></li>
				<li class="outer-item"><img src="img/case1/35.jpg" ></li>
				<li class="outer-item"><img src="img/case1/11.jpg" ></li>
				<li class="outer-item"><img src="img/case1/12.jpg" ></li>
				<li class="outer-item"><img src="img/case1/13.jpg" ></li>
			</ul>
		</div>
	</div>
	<script src="js/jquery-3.4.1.js"></script>
	<script type="text/javascript">
		let $img = $(".pics img"),
			$innerPics = $(".pics .inner-item"),
			$outerPics = $(".pics .outer-item"),
			innerPicLen = $innerPics.length,
			outerPicLen = $outerPics.length,
			innerStep = Math.floor(360 / innerPicLen),
			outerStep = Math.floor(360 / outerPicLen),
			$totalPics = $(".pics li"),
			$picBox = $(".pics");
			
		let innerP = [],//内层的初始rotateX的值
			outerP = [];//外层的初始rotateY的值
		
		// 1.根据图片大小设置li图片盒子大小
		$picBox.css({
			"height" : $($img[0]).height() + "px",
		})
		// 2.内层入场设置
		for(let i = 0; i < innerPicLen; i++) {
			$($innerPics[i]).css({
				"transform" : "rotateY("+i*innerStep+"deg) translateZ(500px)"
			})
			innerP.push(i*innerStep)
			
		}
		// 2.外层入场设置
		for(let i = 0; i < outerPicLen; i++) {
			$($outerPics[i]).css({
				"transform" : "rotateX("+i*outerStep+"deg) translateZ(400px)"
			})
			outerP.push(i*outerStep)
		}
		
		// 3.开启定时器让图片动起来
		let timer = null,
			current = 0,
			innerMoveStep = 0.2,
			outerMoveStep = 0.2;//控制运动速度
		timer = setInterval(function() {
			for(let i = 0; i < innerPicLen; i++) {
				$($innerPics[i]).css({
					"transform" : "rotateY("+(innerP[i]+current*innerMoveStep)+"deg) translateZ(500px)"
				})
			}
			for(let i = 0; i < outerPicLen; i++) {
				$($outerPics[i]).css({
					"transform" : "rotateX("+(outerP[i]+current*outerMoveStep)+"deg) translateZ(400px)"
				})
			}
			current === 1800 ? current = 0 : current += 1;
		},30)
	</script>
</body>
</html>