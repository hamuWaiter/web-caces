<!DOCTYPE html>
<html lang="zh">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>通过canvas绘制任意形状</title>
	<style>
		*{
			margin: 0;
			padding: 0;
		}
	</style>
</head>
<body>
	<canvas id="canvas"></canvas>
</body>
<script>
	let canvas = document.getElementById("canvas"),
		ctx = canvas.getContext("2d"),
		width = window.innerWidth,
		height = window.innerHeight;
	
	canvas.width = width;
	canvas.height = height;
	canvas.style.border = "1px solid #777";
	
// 1.绘制矩形(有现成的API)
	ctx.fillStyle = "orange";
	ctx.fillRect(10,10,40,40);//绘制的坐标点以及矩形宽高
	
// 上面的代码等价于：
	ctx.beginPath();
	ctx.rect(60,10,40,40);//仅仅是一个路径，还没有填充
	ctx.fillStyle = "orange";//填充颜色
	ctx.fill();//填充
	
	ctx.beginPath();
	ctx.rect(110,10,40,40);//仅仅是一个路径，还没有填充
	ctx.strokeStyle = "orange";//描边颜色
	ctx.stroke();//描边
	
// 2.绘制自定义路径(moveTo)
	ctx.beginPath();
	ctx.moveTo(10,80);
	ctx.lineTo(50,80);
	ctx.lineTo(50,120);
	ctx.lineWidth = 4;
	ctx.stroke();
// 自己绘制一个三角形
	ctx.beginPath();
	ctx.moveTo(80,80);
	ctx.lineTo(100,120);
	ctx.lineTo(60,120);
	// ctx.lineTo(100,80);//这种方式路径不能很好地闭合，首尾连接点衔接有瑕疵
	ctx.closePath();//闭合路径
	ctx.lineWidth = 4;
	ctx.stroke();
	
// 4. 绘制圆形(邮箱成的API)
	ctx.beginPath();
	ctx.arc(130,100,20,0,2*Math.PI,true);//圆心、半径、起始角、顺时针/逆时针
	//半圆： 
	// ctx.arc(130,100,20,Math.PI,2*Math.PI,true);//圆心、半径、起始角、顺时针/逆时针
	// ctx.fill();
	ctx.stroke();
	
	
// 5.绘制任意正多边形

	// //5.1 设置绘制中心
	// ctx.translate(width/2,height/2);
	
	// // 5.2 路径
	// ctx.save();
	// ctx.beginPath();
	// ctx.moveTo(0,-100);
	// ctx.rotate(2*Math.PI/3);
	// ctx.lineTo(0,-100);
	// ctx.rotate(2*Math.PI/3);
	// ctx.lineTo(0,-100);
	// ctx.closePath();
	
	// // 5.3 路径绘制
	// ctx.lineWidth = 8;
	// ctx.stroke();
	// ctx.restore();
	
// 绘制任意多边形的代码封装

	//设置绘制中心
	ctx.translate(width/4,height/2);
	
	function drawMyShape(num,lineWidth) {
		
		//写在绘制图形封装里面多次调用绘制函数最终都只显示第一次绘制的形状
		//设置绘制中心
		// ctx.translate(width/4,height/2);
		
		// 5.2 路径
		ctx.save();
		ctx.beginPath();
		ctx.moveTo(0,-100);
		
		for(let i = 0; i < num-1; i++) {
			ctx.rotate(2*Math.PI/num);
			ctx.lineTo(0,-100);
		}
		ctx.closePath();
		
		// 5.3 路径绘制
		ctx.lineWidth = lineWidth;
		ctx.stroke();
		ctx.restore();
	}
	drawMyShape(3,3);
	// drawMyShape(4,3);
	// drawMyShape(5,3);
	// drawMyShape(6,3);
	// drawMyShape(7,3);
	
	
// 通过三角函数的方式绘制正多边形(Math.sin()/Math.cos())
	
	// ctx.translate(width/2,height/2);
	
	// ctx.beginPath();
	// ctx.moveTo(0,-100);
	// ctx.lineTo(100*Math.sin(2*Math.PI/3),-100*Math.cos(2*Math.PI/3));
	// ctx.lineTo(100*Math.sin(2*Math.PI/3*2),-100*Math.cos(2*Math.PI/3*2));
	// ctx.closePath();
	// ctx.stroke();

// 对上面的代码进行封装
function drawShapeBySin(num) {
	// 设置绘制中心
	// ctx.translate(width/2,height/2);
	
	ctx.beginPath();
	ctx.moveTo(0,-100);
	for(let i = 0; i < num-1; i++) {
		ctx.lineTo(100*Math.sin(2*Math.PI/num*(i+1)),
		-100*Math.cos(2*Math.PI/num*(i+1)));
	}
	ctx.closePath();
	ctx.stroke();
}
// drawShapeBySin(7);
drawShapeBySin(10);
</script>
</html>